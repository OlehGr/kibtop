version: '3.9'
services:
   api:
       container_name: api
       build: .
       restart: always
       env_file: .env
       ports:
            - "8000:8000"
       command: >
            sh -c " python manage.py migrate &&
                    python manage.py collectstatic --noinput &&
                    gunicorn settings.wsgi:application --bind 0.0.0.0:8000"
       volumes:
           - .:/app
#   postgresql:
#        image: postgres
#        container_name: postgres
#        environment:
#          - POSTGRES_PASSWORD=password
#        ports:
#          - "5432:5432"